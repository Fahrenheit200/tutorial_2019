# 项目考核：控制和模拟器方向

- 作者：蓝钰乔
- 修订：蓝钰乔
- 日期：2019年10月25日
- 版本：1.0.1
- 摘要：Windows环境下四旋翼的MATLAB建模与仿真

## 完成的工作

- 物理仿真，四旋翼的运动学解算
- 三维实时显示
- 姿态控制器的实现，并仿真显示
- 定高控制器的实现
- 定点控制器的实现
- GUI

## 测试方法

- 姿态控制器的测试

  - **注意**：在测试姿态控制器时，请先将`test.m`文件中的定点控制器（`PID_X`和`PID_Y`） ***comment out*** ，具体代码在`test.m`文件的第 **73** 和第 **74** 行，不出意外我已经默认将它们 ***comment out***
  - 然后，运行`test.m`文件，你可以看到三维显示画面
  - 在左侧的与姿态相对应的三个文本框中输入你想要的角度值，输入完成点击`Go`按钮，就可以看到飞机姿态的变化
  - 待飞机稳定后，关闭三维显示画面，运行`plot_figures`文件夹下的`plot_All.m`文件，你可以看到飞机的六自由度参数曲线

- 定高控制器的测试

  - 定高控制器默认全程开启，因此你可以随时测试它
  - 类似的，在三维显示窗口的`Altitude`文本框中输入你想要的高度值，输入完成后点击`Go`按钮，就可以看到飞机高度的变化
  - 待飞机稳定后，关闭三维显示画面，运行`plot_figures`文件夹下的`plot_All.m`文件，你可以看到飞机的六自由度参数曲线

- 定点控制器的测试

  - **注意**：在测试定点控制器时，请先将`test.m`文件中被 ***comment out*** 的定点控制器 （`PID_X`和`PID_Y`）重新激活
  - 之后的操作和上面类似

- 关于有风和低压环境的模拟

  - 有风环境

    由于临近期中考试，我极不科学地认为：风力对飞机的作用可以直接用作用在飞机位姿参数上的随机误差来表示。因此，我给飞机的位姿参数加了服从正态分布的偏差，这个偏差我默认设置为非0。你也可在`all_variables`文件夹下的`All_Variables.m`文件中修改它们，将他们置0后再查看效果具体的代码在 **142 ~ 147** 行。如将`A.Z_error = randn(1,60*10/A.Ts)*.02;`改为`A.Z_error = randn(1,60*10/A.Ts)*.0;`

  - 低压环境

    查阅资料可知低压环境下空气密度减小，单位时间内作用在旋翼上的空气减少，产生的推力减小。为了表现这一变化，你可以将`All_Variables.m`文件中的这两个参数做一定修改：**①引擎转速与推力大小的比例系数 ②引擎转速与拉力大小的比例系数**。它们在代码的 **12** 和 **14** 行。适当将它们调小，再运行`test.m`，你可以发现右边显示的引擎转速会增大，飞机仍能悬停。当然，这是在上述两个系数不是太小的条件下。如果系数调的太小，由于我设置了最大转速，飞机会无法升起甚至无法悬停，姿态的响应也会变慢。

